================================================================================
TOKEN EFFICIENCY BENCHMARK: Roampal vs Traditional RAG
================================================================================

HYPOTHESIS: Roampal uses fewer tokens while maintaining higher accuracy

CONDITIONS:
  - RAG Top-3:  Return top 3 semantically similar chunks
  - RAG Top-5:  Return top 5 semantically similar chunks
  - Roampal:    Return 1 outcome-weighted best result

Loading embedding model (all-mpnet-base-v2, 768d)...
Model loaded.

--------------------------------------------------------------------------------
Running 100 scenarios...
--------------------------------------------------------------------------------

[  1/100] INVESTING
  RAG-3:  66 tokens | RAG-5: 104 tokens | Roampal:  20 tokens

[  2/100] INVESTING
  RAG-3:  61 tokens | RAG-5: 100 tokens | Roampal:  16 tokens

[  3/100] INVESTING
  RAG-3:  66 tokens | RAG-5: 104 tokens | Roampal:  18 tokens

[  4/100] INVESTING
  RAG-3:  58 tokens | RAG-5:  96 tokens | Roampal:  18 tokens

[  5/100] INVESTING
  RAG-3:  59 tokens | RAG-5:  99 tokens | Roampal:  17 tokens

[  6/100] INVESTING
  RAG-3:  58 tokens | RAG-5:  96 tokens | Roampal:  16 tokens

[  7/100] INVESTING
  RAG-3:  51 tokens | RAG-5:  93 tokens | Roampal:  15 tokens

[  8/100] INVESTING
  RAG-3:  58 tokens | RAG-5:  97 tokens | Roampal:  15 tokens

[  9/100] INVESTING
  RAG-3:  53 tokens | RAG-5:  91 tokens | Roampal:  17 tokens

[ 10/100] INVESTING
  RAG-3:  57 tokens | RAG-5:  95 tokens | Roampal:  15 tokens

[ 11/100] RETIREMENT
  RAG-3:  54 tokens | RAG-5:  94 tokens | Roampal:  18 tokens

[ 12/100] RETIREMENT
  RAG-3:  60 tokens | RAG-5:  98 tokens | Roampal:  19 tokens

[ 13/100] RETIREMENT
  RAG-3:  54 tokens | RAG-5:  94 tokens | Roampal:  17 tokens

[ 14/100] RETIREMENT
  RAG-3:  53 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 15/100] RETIREMENT
  RAG-3:  60 tokens | RAG-5:  99 tokens | Roampal:  19 tokens

[ 16/100] RETIREMENT
  RAG-3:  56 tokens | RAG-5:  95 tokens | Roampal:  16 tokens

[ 17/100] RETIREMENT
  RAG-3:  51 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 18/100] RETIREMENT
  RAG-3:  58 tokens | RAG-5:  95 tokens | Roampal:  17 tokens

[ 19/100] RETIREMENT
  RAG-3:  54 tokens | RAG-5:  94 tokens | Roampal:  17 tokens

[ 20/100] RETIREMENT
  RAG-3:  55 tokens | RAG-5:  93 tokens | Roampal:  15 tokens

[ 21/100] DEBT
  RAG-3:  58 tokens | RAG-5:  94 tokens | Roampal:  17 tokens

[ 22/100] DEBT
  RAG-3:  58 tokens | RAG-5:  94 tokens | Roampal:  19 tokens

[ 23/100] DEBT
  RAG-3:  56 tokens | RAG-5:  94 tokens | Roampal:  15 tokens

[ 24/100] DEBT
  RAG-3:  48 tokens | RAG-5:  84 tokens | Roampal:  14 tokens

[ 25/100] DEBT
  RAG-3:  51 tokens | RAG-5:  87 tokens | Roampal:  14 tokens

[ 26/100] DEBT
  RAG-3:  50 tokens | RAG-5:  87 tokens | Roampal:  12 tokens

[ 27/100] DEBT
  RAG-3:  50 tokens | RAG-5:  87 tokens | Roampal:  16 tokens

[ 28/100] DEBT
  RAG-3:  53 tokens | RAG-5:  89 tokens | Roampal:  14 tokens

[ 29/100] DEBT
  RAG-3:  53 tokens | RAG-5:  88 tokens | Roampal:  15 tokens

[ 30/100] DEBT
  RAG-3:  49 tokens | RAG-5:  87 tokens | Roampal:  12 tokens

[ 31/100] EMERGENCY
  RAG-3:  58 tokens | RAG-5:  96 tokens | Roampal:  16 tokens

[ 32/100] EMERGENCY
  RAG-3:  57 tokens | RAG-5:  96 tokens | Roampal:  17 tokens

[ 33/100] EMERGENCY
  RAG-3:  54 tokens | RAG-5:  92 tokens | Roampal:  15 tokens

[ 34/100] EMERGENCY
  RAG-3:  56 tokens | RAG-5:  94 tokens | Roampal:  17 tokens

[ 35/100] EMERGENCY
  RAG-3:  57 tokens | RAG-5:  96 tokens | Roampal:  17 tokens

[ 36/100] EMERGENCY
  RAG-3:  52 tokens | RAG-5:  92 tokens | Roampal:  18 tokens

[ 37/100] EMERGENCY
  RAG-3:  56 tokens | RAG-5:  96 tokens | Roampal:  16 tokens

[ 38/100] EMERGENCY
  RAG-3:  55 tokens | RAG-5:  95 tokens | Roampal:  17 tokens

[ 39/100] EMERGENCY
  RAG-3:  56 tokens | RAG-5:  94 tokens | Roampal:  16 tokens

[ 40/100] EMERGENCY
  RAG-3:  53 tokens | RAG-5:  94 tokens | Roampal:  16 tokens

[ 41/100] INSURANCE
  RAG-3:  61 tokens | RAG-5:  99 tokens | Roampal:  20 tokens

[ 42/100] INSURANCE
  RAG-3:  51 tokens | RAG-5:  89 tokens | Roampal:  15 tokens

[ 43/100] INSURANCE
  RAG-3:  56 tokens | RAG-5:  94 tokens | Roampal:  15 tokens

[ 44/100] INSURANCE
  RAG-3:  53 tokens | RAG-5:  93 tokens | Roampal:  16 tokens

[ 45/100] INSURANCE
  RAG-3:  52 tokens | RAG-5:  92 tokens | Roampal:  14 tokens

[ 46/100] INSURANCE
  RAG-3:  61 tokens | RAG-5:  99 tokens | Roampal:  17 tokens

[ 47/100] INSURANCE
  RAG-3:  54 tokens | RAG-5:  92 tokens | Roampal:  15 tokens

[ 48/100] INSURANCE
  RAG-3:  52 tokens | RAG-5:  90 tokens | Roampal:  14 tokens

[ 49/100] INSURANCE
  RAG-3:  54 tokens | RAG-5:  92 tokens | Roampal:  14 tokens

[ 50/100] INSURANCE
  RAG-3:  56 tokens | RAG-5:  95 tokens | Roampal:  15 tokens

[ 51/100] TAXES
  RAG-3:  55 tokens | RAG-5:  93 tokens | Roampal:  17 tokens

[ 52/100] TAXES
  RAG-3:  54 tokens | RAG-5:  90 tokens | Roampal:  16 tokens

[ 53/100] TAXES
  RAG-3:  50 tokens | RAG-5:  88 tokens | Roampal:  15 tokens

[ 54/100] TAXES
  RAG-3:  52 tokens | RAG-5:  90 tokens | Roampal:  16 tokens

[ 55/100] TAXES
  RAG-3:  57 tokens | RAG-5:  93 tokens | Roampal:  17 tokens

[ 56/100] TAXES
  RAG-3:  54 tokens | RAG-5:  90 tokens | Roampal:  14 tokens

[ 57/100] TAXES
  RAG-3:  52 tokens | RAG-5:  90 tokens | Roampal:  18 tokens

[ 58/100] TAXES
  RAG-3:  52 tokens | RAG-5:  89 tokens | Roampal:  17 tokens

[ 59/100] TAXES
  RAG-3:  52 tokens | RAG-5:  90 tokens | Roampal:  14 tokens

[ 60/100] TAXES
  RAG-3:  56 tokens | RAG-5:  92 tokens | Roampal:  17 tokens

[ 61/100] REALESTATE
  RAG-3:  57 tokens | RAG-5:  96 tokens | Roampal:  17 tokens

[ 62/100] REALESTATE
  RAG-3:  53 tokens | RAG-5:  92 tokens | Roampal:  15 tokens

[ 63/100] REALESTATE
  RAG-3:  55 tokens | RAG-5:  93 tokens | Roampal:  17 tokens

[ 64/100] REALESTATE
  RAG-3:  54 tokens | RAG-5:  93 tokens | Roampal:  14 tokens

[ 65/100] REALESTATE
  RAG-3:  54 tokens | RAG-5:  92 tokens | Roampal:  15 tokens

[ 66/100] REALESTATE
  RAG-3:  54 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 67/100] REALESTATE
  RAG-3:  53 tokens | RAG-5:  94 tokens | Roampal:  15 tokens

[ 68/100] REALESTATE
  RAG-3:  56 tokens | RAG-5:  95 tokens | Roampal:  16 tokens

[ 69/100] REALESTATE
  RAG-3:  53 tokens | RAG-5:  92 tokens | Roampal:  13 tokens

[ 70/100] REALESTATE
  RAG-3:  55 tokens | RAG-5:  93 tokens | Roampal:  15 tokens

[ 71/100] BEHAVIORAL
  RAG-3:  54 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 72/100] BEHAVIORAL
  RAG-3:  53 tokens | RAG-5:  93 tokens | Roampal:  15 tokens

[ 73/100] BEHAVIORAL
  RAG-3:  52 tokens | RAG-5:  93 tokens | Roampal:  15 tokens

[ 74/100] BEHAVIORAL
  RAG-3:  55 tokens | RAG-5:  94 tokens | Roampal:  16 tokens

[ 75/100] BEHAVIORAL
  RAG-3:  52 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 76/100] BEHAVIORAL
  RAG-3:  52 tokens | RAG-5:  91 tokens | Roampal:  16 tokens

[ 77/100] BEHAVIORAL
  RAG-3:  51 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 78/100] BEHAVIORAL
  RAG-3:  57 tokens | RAG-5:  95 tokens | Roampal:  18 tokens

[ 79/100] BEHAVIORAL
  RAG-3:  53 tokens | RAG-5:  92 tokens | Roampal:  14 tokens

[ 80/100] BEHAVIORAL
  RAG-3:  55 tokens | RAG-5:  93 tokens | Roampal:  15 tokens

[ 81/100] MYTHS
  RAG-3:  57 tokens | RAG-5:  92 tokens | Roampal:  15 tokens

[ 82/100] MYTHS
  RAG-3:  56 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 83/100] MYTHS
  RAG-3:  54 tokens | RAG-5:  90 tokens | Roampal:  15 tokens

[ 84/100] MYTHS
  RAG-3:  52 tokens | RAG-5:  89 tokens | Roampal:  13 tokens

[ 85/100] MYTHS
  RAG-3:  54 tokens | RAG-5:  91 tokens | Roampal:  14 tokens

[ 86/100] MYTHS
  RAG-3:  56 tokens | RAG-5:  90 tokens | Roampal:  16 tokens

[ 87/100] MYTHS
  RAG-3:  53 tokens | RAG-5:  87 tokens | Roampal:  15 tokens

[ 88/100] MYTHS
  RAG-3:  55 tokens | RAG-5:  93 tokens | Roampal:  17 tokens

[ 89/100] MYTHS
  RAG-3:  54 tokens | RAG-5:  89 tokens | Roampal:  14 tokens

[ 90/100] MYTHS
  RAG-3:  56 tokens | RAG-5:  91 tokens | Roampal:  16 tokens

[ 91/100] INCOME
  RAG-3:  54 tokens | RAG-5:  92 tokens | Roampal:  16 tokens

[ 92/100] INCOME
  RAG-3:  51 tokens | RAG-5:  90 tokens | Roampal:  15 tokens

[ 93/100] INCOME
  RAG-3:  53 tokens | RAG-5:  92 tokens | Roampal:  18 tokens

[ 94/100] INCOME
  RAG-3:  47 tokens | RAG-5:  85 tokens | Roampal:  14 tokens

[ 95/100] INCOME
  RAG-3:  52 tokens | RAG-5:  91 tokens | Roampal:  16 tokens

[ 96/100] INCOME
  RAG-3:  48 tokens | RAG-5:  86 tokens | Roampal:  12 tokens

[ 97/100] INCOME
  RAG-3:  53 tokens | RAG-5:  91 tokens | Roampal:  16 tokens

[ 98/100] INCOME
  RAG-3:  54 tokens | RAG-5:  93 tokens | Roampal:  18 tokens

[ 99/100] INCOME
  RAG-3:  55 tokens | RAG-5:  93 tokens | Roampal:  17 tokens

[100/100] INCOME
  RAG-3:  52 tokens | RAG-5:  89 tokens | Roampal:  14 tokens

================================================================================
RESULTS SUMMARY
================================================================================

Metric                    RAG Top-3       RAG Top-5       Roampal        
--------------------------------------------------------------------------------
Avg tokens/query          54.5            92.6            15.8           
Hit@1 (accuracy)          1.0            % 1.0            % 0.0            %
Hit@3                     97.0           % 97.0           % 0.0            %
MRR                       0.490           0.496           0.000          
nDCG@3                    0.616           0.616           0.000          
Correct answers           1              /100 1              /100 0              /100
Efficiency (acc/100tok)   1.83            1.08            0.00           

================================================================================
TOKEN REDUCTION
================================================================================

Roampal token reduction:
  vs RAG Top-3: 71.0% fewer tokens (54 -> 16)
  vs RAG Top-5: 82.9% fewer tokens (93 -> 16)

Efficiency multiplier:
  RAG Top-3 uses 3.4x more tokens than Roampal
  RAG Top-5 uses 5.9x more tokens than Roampal

================================================================================
COST PROJECTIONS (1M queries/month)
================================================================================

gpt-4o:
  RAG Top-3:  $  1,635.00/year
  RAG Top-5:  $  2,778.60/year
  Roampal:    $    474.90/year
  Savings vs RAG-3: $  1,160.10/year
  Savings vs RAG-5: $  2,303.70/year

gpt-4o-mini:
  RAG Top-3:  $     98.10/year
  RAG Top-5:  $    166.72/year
  Roampal:    $     28.49/year
  Savings vs RAG-3: $     69.61/year
  Savings vs RAG-5: $    138.22/year

claude-3.5-sonnet:
  RAG Top-3:  $  1,962.00/year
  RAG Top-5:  $  3,334.32/year
  Roampal:    $    569.88/year
  Savings vs RAG-3: $  1,392.12/year
  Savings vs RAG-5: $  2,764.44/year

================================================================================
COMPARISON WITH TYPICAL RAG CONFIGURATIONS
================================================================================

Configuration                       Tokens       vs Roampal  
----------------------------------------------------------------------
RAG top-3 (500 char chunks)         375          23.7x more
RAG top-5 (500 char chunks)         625          39.5x more
RAG top-3 (1K char chunks)          750          47.4x more
RAG top-5 (1K char chunks)          1.2K         79.0x more
Roampal (this test)                 15           baseline

================================================================================
INDUSTRY CONTEXT: Memory Materialization Costs
(NOTE: These measure total memory store size, not per-query retrieval)
================================================================================

System                         Tokens       Notes
-------------------------------------------------------------------------------------
Full Context (LOCOMO)          26.0K        LOCOMO avg conversation length - entire histo
Mem0                           7.0K         Mem0 research (arxiv:2504.19413) - avg memory
Mem0 + Graph                   14.0K        Mem0 with graph memory - nodes + relationship
Zep                            600.0K       Zep memory graph (disputed) - full KG seriali

Annual savings at 1M queries/month (GPT-4o pricing):
  vs RAG top-3 (500 char chunks)   : $ 10,775.10/year saved
  vs RAG top-5 (500 char chunks)   : $ 18,275.10/year saved
  vs RAG top-3 (1K char chunks)    : $ 22,025.10/year saved
  vs RAG top-5 (1K char chunks)    : $ 37,025.10/year saved

================================================================================
CONCLUSION
================================================================================

KEY FINDINGS:

1. TOKEN EFFICIENCY:
   - Roampal: 16 tokens/query average
   - RAG Top-3: 54 tokens/query (3.4x more)
   - RAG Top-5: 93 tokens/query (5.9x more)

2. ACCURACY:
   - Roampal: 0.0% (0/100 correct)
   - RAG Top-3: 1.0% (1/100 correct)
   - RAG Top-5: 1.0% (1/100 correct)

3. EFFICIENCY RATIO (accuracy per 100 tokens):
   - Roampal: 0.00
   - RAG Top-3: 1.83
   - RAG Top-5: 1.08

HEADLINE:
  Roampal uses 83% fewer tokens than standard RAG
  while achieving 0% accuracy vs 1%.

Full results saved to: c:\roampal-core\dev\benchmarks\token_efficiency_data\token_efficiency_results.json

Cleaning up test data...
Warning: Could not clean up: [WinError 32] The process cannot access the file because it is being used by another process: 'c:\\roampal-core\\dev\\benchmarks\\token_efficiency_data\\rag3_1\\331e7337-25d0-4c37-8c3a-451808f74ab1\\data_level0.bin'
